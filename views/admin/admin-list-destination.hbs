<body>
  <div class="container-fluid">
    <div class="main">
      <aside class="row-cols-1 m-0 p-0">
        <form id="account-list" action="admin-list-account">
        </form>
        <form id="destination-list" action="admin-list-destination">
        </form>
        <button id="account-list" class="btn function-btn" form="account-list"><b>Tài khoản</b></button>
        <button id="destination-list" class="btn function-btn" form="destination-list"><b>Địa điểm</b></button>
      </aside>
      <div id="content">
        <div class="search-bar">
          <form class="search-form w-50 my-2 mx-2 ps-1 rounded-3 ">
            <input class="form-control border-0" type="search" placeholder="Nhập thông tin muốn tìm kiếm"
              aria-label="Search" autocomplete>
            <button class="btn" type="submit" class="float-end"><i class="fa-solid fa-magnifying-glass"></i></button>
          </form>
        </div>

        <table class="table table-striped table-hover ">
          <thead>
            <tr>
              <th scope="col" style="width: 10%">STT</th>
              <th scope="col" style="width: 30%">Nơi cách ly</th>
              <th scope="col" style="width: 30%">Địa chỉ</th>
              <th scope="col" style="width: 20%">Tình trạng</th>
              <th style="width: 10%" class="icon">
                <img src="../images/add-icon.png" alt="add-icon" alt="add-destination" onclick="openAddFragPopUp()"
                  id="addDestination">
              </th>
            </tr>
          </thead>
          <tbody id="destinations" class="list-group-flush">
            {{#each quarantine_loc}}
            <tr>
              <th scope="row">{{this}}</th>
              <td>{{name}}</td>
              <td>{{address}}</td>
              <td>{{amount}}/{{capacity}}</td>
              <td>
                <img class="btn-func" src="../images/change-icon.png" alt="change-icon" onclick="openChangeFragPopUp()">
                <img src="../images/delete-icon.png" class="mx-3 btn-func" alt="delete-icon">
              </td>
            </tr>
            {{/each}}

          </tbody>
        </table>
        <div id="addDestinationFrag" class="form-container">
          <img class="back-icon" src="../images/close-icon.png" onclick="closeAddFragPopUp()" alt="">
          <div class="form-label text-center">
            <h2>Thêm địa điểm</h2>
          </div>
          <form id="form-des" class="inputform" action="add_new_loc">
            <label for="name">Tên địa điểm</label>
            <input id="name" type="text" name="name" required>
            <label for="address">Địa chỉ</label>
            <input id="address" type="text" name="address" required>
            <label for="capicity">Sức chứa <i> (Đơn vị: giường)</i></label>
            <input id="capicity" type="number" name="capicity" required>
            <button id="btn-submit" class="btn btn-success" type="submit">Xác nhận</button>
          </form>
        </div>

        <div id="changeDestinationFrag" class="form-container">
          <img class="back-icon" src="../images/close-icon.png" onclick="closeChangeFragPopUp()" alt="">
          <div class="form-label text-center">
            <h2>Chỉnh sửa địa điểm</h2>
          </div>
          <form id="form-des" class="inputform" action="update_loc">
            <label for="name">Tên địa điểm</label>
            <input id="name" type="text" name="name" required>
            <label for="address">Địa chỉ</label>
            <input id="address" type="text" name="address" required>
            <label for="capicity">Sức chứa <i> (Đơn vị: giường)</i></label>
            <input id="capicity" type="number" name="capicity" required>
            <button id="btn-submit" class="btn btn-success" type="submit">Xác nhận</button>
          </form>
        </div>


        <div id="list-of-resuls">
          <nav>
            <button id="page-previous" onclick="previousList()"><b>Trước</b></button>
            ...
            <button id="page-next" onClick="nextList()"><b>Tiếp</b></button>



          </nav>
        </div>
      </div>
    </div>
  </div>
  <script src="https://kit.fontawesome.com/1de341d6e9.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
  <script>
    function openAddFragPopUp() {
      const addDestinationFrag = document.getElementById("addDestinationFrag");
      addDestinationFrag.style.display = 'block';
    }

    function closeAddFragPopUp() {
      const addDestinationFrag = document.getElementById("addDestinationFrag");
      addDestinationFrag.style.display = 'none';

    }

    function openChangeFragPopUp() {
      const addDestinationFrag = document.getElementById("changeDestinationFrag");
      addDestinationFrag.style.display = 'block';
    }

    function closeChangeFragPopUp() {
      const addDestinationFrag = document.getElementById("changeDestinationFrag");
      addDestinationFrag.style.display = 'none';

    }
  </script>
  <script>
    function getParameterByName(name, url = window.location.href) {
      name = name.replace(/[\[\]]/g, '\\$&');
      var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }
    function updateURLParameter(url, param, paramVal) {
      var newAdditionalURL = "";
      var tempArray = url.split("?");
      var baseURL = tempArray[0];
      var additionalURL = tempArray[1];
      var temp = "";
      if (additionalURL) {
        tempArray = additionalURL.split("&");
        for (var i = 0; i < tempArray.length; i++) {
          if (tempArray[i].split('=')[0] != param) {
            newAdditionalURL += temp + tempArray[i];
            temp = "&";
          }
        }
      }
      var rows_txt = temp + "" + param + "=" + paramVal;
      return baseURL + "?" + newAdditionalURL + rows_txt;
    }

    function previousList() {
      var page_prev_index = parseInt(getParameterByName('page-index'), 10) - 1;
      if (page_prev_index != null) {
        if (page_prev_index >= 1) {
          var newURL = updateURLParameter(window.location.href, 'page-index', page_prev_index);
          location.replace(newURL);
        }
      }
      else {
        console.log("page-index is null");
      }

    }
    function nextList() {
      var page_next_index = parseInt(getParameterByName('page-index'), 10) + 1;
      if (page_next_index != null) {
        var newURL = updateURLParameter(window.location.href, 'page-index', page_next_index);
        location.replace(newURL);
      }
      else {
        console.log("page-index is null");
      }
    }
  </script>
</body>